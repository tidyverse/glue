<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to glue • glue</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to glue">
<meta name="robots" content="noindex">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="glue.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">glue</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.8.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/glue.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/engines.html">Custom knitr language engines</a></li>
    <li><a class="dropdown-item" href="../articles/speed.html">Speed of glue</a></li>
    <li><a class="dropdown-item" href="../articles/transformers.html">Transformers</a></li>
    <li><a class="dropdown-item" href="../articles/wrappers.html">How to write a function that wraps glue</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2017/10/glue-1.2.0/">glue 1.2.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/glue/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to glue</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/glue/blob/main/vignettes/glue.Rmd" class="external-link"><code>vignettes/glue.Rmd</code></a></small>
      <div class="d-none name"><code>glue.Rmd</code></div>
    </div>

    
    
<p>The glue package contains functions for string interpolation: gluing
together character strings and R code.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glue.tidyverse.org/">glue</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="gluing-and-interpolating">Gluing and interpolating<a class="anchor" aria-label="anchor" href="#gluing-and-interpolating"></a>
</h2>
<p><code><a href="../reference/glue.html">glue()</a></code> can be used to glue together pieces of text:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"glue "</span>, <span class="st">"some "</span>, <span class="st">"text "</span>, <span class="st">"together"</span><span class="op">)</span></span>
<span><span class="co">#&gt; glue some text together</span></span></code></pre></div>
<p>But glue’s real power comes with <code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code>: anything inside of
<code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code> is evaluated and pasted into the string. This makes it
easy to interpolate variables:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"glue"</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"We are learning how to use the {name} R package."</span><span class="op">)</span></span>
<span><span class="co">#&gt; We are learning how to use the glue R package.</span></span></code></pre></div>
<p>As well as more complex expressions:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">release_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-06-13"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"Release was on a {format(release_date, '%A')}."</span><span class="op">)</span></span>
<span><span class="co">#&gt; Release was on a Tuesday.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="control-of-line-breaks">Control of line breaks<a class="anchor" aria-label="anchor" href="#control-of-line-breaks"></a>
</h2>
<p><code><a href="../reference/glue.html">glue()</a></code> honors the line breaks in its input:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  A formatted string</span></span>
<span><span class="st">  Can have multiple lines</span></span>
<span><span class="st">    with additional indentation preserved</span></span>
<span><span class="st">  "</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; A formatted string</span></span>
<span><span class="co">#&gt; Can have multiple lines</span></span>
<span><span class="co">#&gt;   with additional indentation preserved</span></span></code></pre></div>
<p>The example above demonstrates some other important facts about the
pre-processing of the template string:</p>
<ul>
<li>An empty first or last line is automatically trimmed.</li>
<li>Leading whitespace that is common across all lines is trimmed.</li>
</ul>
<p>The elimination of common leading whitespace is advantageous, because
you aren’t forced to choose between indenting your code normally and
getting the output you actually want. This is easier to appreciate when
you have <code><a href="../reference/glue.html">glue()</a></code> inside a function body (this example also
shows an alternative way of styling the end of a <code><a href="../reference/glue.html">glue()</a></code>
call):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">    A formatted string</span></span>
<span><span class="st">    Can have multiple lines</span></span>
<span><span class="st">      with additional indentation preserved"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">foo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; A formatted string</span></span>
<span><span class="co">#&gt; Can have multiple lines</span></span>
<span><span class="co">#&gt;   with additional indentation preserved</span></span></code></pre></div>
<p>On the other hand, what if you don’t want a line break in the output,
but you also like to limit the length of lines in your source code to,
e.g., 80 characters? The first option is to use <code>\\</code> to break
the template string into multiple lines, without getting line breaks in
the output:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">release_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-06-13"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  The first version of the glue package was released on \\</span></span>
<span><span class="st">  a {format(release_date, '%A')}."</span><span class="op">)</span></span>
<span><span class="co">#&gt; The first version of the glue package was released on a Tuesday.</span></span></code></pre></div>
<p>This comes up fairly often when an expression to evaluate inside
<code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code> takes up more characters than its result,
i.e. <code>format(release_date, '%A')</code> versus
<code>Tuesday</code>. A second way to achieve the same result is to
break the template into individual pieces, which are then
concatenated.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span></span>
<span>  <span class="st">"The first version of the glue package was released on "</span>,</span>
<span>  <span class="st">"a {format(release_date, '%A')}."</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; The first version of the glue package was released on a Tuesday.</span></span></code></pre></div>
<p>If you want an explicit newline at the start or end, include an extra
empty line.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># no leading or trailing newline</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  blah</span></span>
<span><span class="st">  "</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "blah"</span></span>
<span></span>
<span><span class="co"># both a leading and trailing newline</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st"></span></span>
<span><span class="st">  blah</span></span>
<span><span class="st"></span></span>
<span><span class="st">  "</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "\nblah\n"</span></span></code></pre></div>
<p>We use <code><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass()</a></code> above to make it easier to see the
absence and presence of the newlines, i.e. to reveal the literal
<code>\n</code> escape sequences. <code><a href="../reference/glue.html">glue()</a></code> and friends
generally return a glue object, which is a character vector with the S3
class <code>"glue"</code>. The <code>"glue"</code> class exists
primarily for the sake of a print method, which displays the natural
formatted result of a glue string. Most of the time this is
<em>exactly</em> what the user wants to see. The example above happens
to be an exception, where we really do want to see the underlying string
representation.</p>
<p>Here’s another example to drive home the difference between printing
a glue object and looking at its string representation.
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code> is a another way to do this that is arguably
more expressive.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">'</span></span>
<span><span class="st">  abc</span></span>
<span><span class="st">  " }</span></span>
<span><span class="st"></span></span>
<span><span class="st">  xyz'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "glue"      "character"</span></span>
<span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; abc</span></span>
<span><span class="co">#&gt; "    }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; xyz</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "abc\n\"\t}\n\nxyz"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "abc\n\"\t}\n\nxyz"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="delimiters">Delimiters<a class="anchor" aria-label="anchor" href="#delimiters"></a>
</h2>
<p>By default, code to be evaluated goes inside <code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code> in a
glue string. If want a literal curly brace in your string, double
it:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"The name of the package is {name}, not {{name}}."</span><span class="op">)</span></span>
<span><span class="co">#&gt; The name of the package is glue, not {name}.</span></span></code></pre></div>
<p>Sometimes it’s just more convenient to use different delimiters
altogether, especially if the template text comes from elsewhere or is
subject to external requirements. Consider this example where we want to
interpolate the function name into a code snippet that defines a
function:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fn_def</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  &lt;&lt;NAME&gt;&gt; &lt;- function(x) {</span></span>
<span><span class="st">    # imagine a function body here</span></span>
<span><span class="st">  }"</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="va">fn_def</span>, NAME <span class="op">=</span> <span class="st">"my_function"</span>, .open <span class="op">=</span> <span class="st">"&lt;&lt;"</span>, .close <span class="op">=</span> <span class="st">"&gt;&gt;"</span><span class="op">)</span></span>
<span><span class="co">#&gt; my_function &lt;- function(x) {</span></span>
<span><span class="co">#&gt;   # imagine a function body here</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>In this glue string, <code>{</code> and <code>}</code> have very
special meaning. If we forced ourselves to double them, suddenly it
doesn’t look like normal R code anymore. Using alternative delimiters is
a nice option in cases like this.</p>
</div>
<div class="section level2">
<h2 id="where-glue-looks-for-values">Where glue looks for values<a class="anchor" aria-label="anchor" href="#where-glue-looks-for-values"></a>
</h2>
<p>By default, <code><a href="../reference/glue.html">glue()</a></code> evaluates the code inside
<code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code> in the caller environment:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="va">...</span>, .envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>So, for a top-level <code><a href="../reference/glue.html">glue()</a></code> call, that means the global
environment.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"the caller environment"</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"By default, `glue()` evaluates code in {x}."</span><span class="op">)</span></span>
<span><span class="co">#&gt; By default, `glue()` evaluates code in the caller environment.</span></span></code></pre></div>
<p>But you can provide more narrowly scoped values by passing them to
<code><a href="../reference/glue.html">glue()</a></code> in <code>name = value</code> form:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"the local environment"</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span></span>
<span>  <span class="st">"`glue()` can access values from {x} or from {y}. {z}"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"named arguments"</span>,</span>
<span>  z <span class="op">=</span> <span class="st">"Woo!"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; `glue()` can access values from the local environment or from named arguments. Woo!</span></span></code></pre></div>
<p>If the relevant data lives in a data frame (or list or environment),
use <code><a href="../reference/glue.html">glue_data()</a></code> instead:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mini_mtcars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>, <span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mini_mtcars</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue_data</a></span><span class="op">(</span><span class="va">mini_mtcars</span>, <span class="st">"{model} has {hp} hp."</span><span class="op">)</span></span>
<span><span class="co">#&gt; Mazda RX4 has 110 hp.</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag has 110 hp.</span></span>
<span><span class="co">#&gt; Datsun 710 has 93 hp.</span></span>
<span><span class="co">#&gt; Hornet 4 Drive has 110 hp.</span></span>
<span><span class="co">#&gt; Hornet Sportabout has 175 hp.</span></span>
<span><span class="co">#&gt; Valiant has 105 hp.</span></span></code></pre></div>
<p><code><a href="../reference/glue.html">glue_data()</a></code> is very natural to use with the pipe:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mini_mtcars</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/glue.html">glue_data</a></span><span class="op">(</span><span class="st">"{model} gets {mpg} miles per gallon."</span><span class="op">)</span></span>
<span><span class="co">#&gt; Mazda RX4 gets 21 miles per gallon.</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag gets 21 miles per gallon.</span></span>
<span><span class="co">#&gt; Datsun 710 gets 22.8 miles per gallon.</span></span>
<span><span class="co">#&gt; Hornet 4 Drive gets 21.4 miles per gallon.</span></span>
<span><span class="co">#&gt; Hornet Sportabout gets 18.7 miles per gallon.</span></span>
<span><span class="co">#&gt; Valiant gets 18.1 miles per gallon.</span></span></code></pre></div>
<p>Returning to <code><a href="../reference/glue.html">glue()</a></code>, recall that it defaults to
evaluation in the caller environment. This has happy implications inside
a <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code> pipeline. The data-masking feature of
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> means the columns of the target data frame are “in
scope” for a <code><a href="../reference/glue.html">glue()</a></code> call:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mini_mtcars</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>note <span class="op">=</span> <span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{model} gets {mpg} miles per gallon."</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">note</span>, <span class="va">cyl</span>, <span class="va">disp</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                            note cyl disp</span></span>
<span><span class="co">#&gt; 1           Mazda RX4 gets 21 miles per gallon.   6  160</span></span>
<span><span class="co">#&gt; 2       Mazda RX4 Wag gets 21 miles per gallon.   6  160</span></span>
<span><span class="co">#&gt; 3        Datsun 710 gets 22.8 miles per gallon.   4  108</span></span>
<span><span class="co">#&gt; 4    Hornet 4 Drive gets 21.4 miles per gallon.   6  258</span></span>
<span><span class="co">#&gt; 5 Hornet Sportabout gets 18.7 miles per gallon.   8  360</span></span>
<span><span class="co">#&gt; 6           Valiant gets 18.1 miles per gallon.   6  225</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sql">SQL<a class="anchor" aria-label="anchor" href="#sql"></a>
</h2>
<p>glue has explicit support for constructing SQL statements. Use
backticks to quote identifiers. Normal strings and numbers are quoted
appropriately for your backend.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"[.]"</span>, <span class="st">"_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"iris"</span>, <span class="va">iris</span><span class="op">)</span></span>
<span><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">"sepal_width"</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="st">"iris"</span></span>
<span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">val</span> <span class="op">&lt;-</span> <span class="st">"setosa"</span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT {`var`}</span></span>
<span><span class="st">  FROM {`tbl`}</span></span>
<span><span class="st">  WHERE {`tbl`}.sepal_length &gt; {num}</span></span>
<span><span class="st">    AND {`tbl`}.species = {val}</span></span>
<span><span class="st">  "</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT `sepal_width`</span></span>
<span><span class="co">#&gt; FROM `iris`</span></span>
<span><span class="co">#&gt; WHERE `iris`.sepal_length &gt; 2</span></span>
<span><span class="co">#&gt;   AND `iris`.species = 'setosa'</span></span></code></pre></div>
<p><code><a href="../reference/glue_sql.html">glue_sql()</a></code> can be used in conjunction with parameterized
queries using <code><a href="https://dbi.r-dbi.org/reference/dbBind.html" class="external-link">DBI::dbBind()</a></code> to provide protection for SQL
Injection attacks.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sql</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT {`var`}</span></span>
<span><span class="st">  FROM {`tbl`}</span></span>
<span><span class="st">  WHERE {`tbl`}.sepal_length &gt; ?</span></span>
<span><span class="st">"</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbSendQuery.html" class="external-link">dbSendQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">sql</span><span class="op">)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbBind.html" class="external-link">dbBind</a></span><span class="op">(</span><span class="va">query</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbFetch.html" class="external-link">dbFetch</a></span><span class="op">(</span><span class="va">query</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;   sepal_width</span></span>
<span><span class="co">#&gt; 1         3.5</span></span>
<span><span class="co">#&gt; 2         3.0</span></span>
<span><span class="co">#&gt; 3         3.2</span></span>
<span><span class="co">#&gt; 4         3.1</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbClearResult.html" class="external-link">dbClearResult</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/glue_sql.html">glue_sql()</a></code> can be used to build up more complex queries
with interchangeable sub queries. It returns <code><a href="https://dbi.r-dbi.org/reference/SQL.html" class="external-link">DBI::SQL()</a></code>
objects which are properly protected from quoting.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sub_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT *</span></span>
<span><span class="st">  FROM {`tbl`}</span></span>
<span><span class="st">  "</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT s.{`var`}</span></span>
<span><span class="st">  FROM ({sub_query}) AS s</span></span>
<span><span class="st">  "</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT s.`sepal_width`</span></span>
<span><span class="co">#&gt; FROM (SELECT *</span></span>
<span><span class="co">#&gt; FROM `iris`) AS s</span></span></code></pre></div>
<p>If you want to input multiple values for use in SQL IN statements put
<code>*</code> at the end of the value and the values will be collapsed
and quoted appropriately.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE sepal_length IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="fl">1</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE sepal_length IN (1)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE sepal_length IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE sepal_length IN (1, 2, 3, 4, 5)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE species IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="st">"setosa"</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE species IN ('setosa')</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE species IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"setosa"</span>, <span class="st">"versicolor"</span><span class="op">)</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE species IN ('setosa', 'versicolor')</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
