<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started with glue • glue</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with glue">
<meta name="robots" content="noindex">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script><script defer data-domain="glue.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">glue</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.7.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/glue.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/engines.html">glue custom knitr language engines</a></li>
    <li><a class="dropdown-item" href="../articles/speed.html">Speed of glue</a></li>
    <li><a class="dropdown-item" href="../articles/transformers.html">Transformers</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2017/10/glue-1.2.0/">glue 1.2.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/glue/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting started with glue</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/glue/blob/main/vignettes/glue.Rmd" class="external-link"><code>vignettes/glue.Rmd</code></a></small>
      <div class="d-none name"><code>glue.Rmd</code></div>
    </div>

    
    
<p><em>Note: this vignette is still under development.</em></p>
<p>The <code>glue</code> package contains functions for glueing together
character strings and R code.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glue.tidyverse.org/">glue</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="gluing-and-interpolating">Gluing and interpolating<a class="anchor" aria-label="anchor" href="#gluing-and-interpolating"></a>
</h2>
<p><code><a href="../reference/glue.html">glue()</a></code> can be used to glue together character strings,
such as text:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"glueing "</span>, <span class="st">"some "</span>, <span class="st">"text "</span>, <span class="st">"together"</span><span class="op">)</span></span>
<span><span class="co">#&gt; glueing some text together</span></span></code></pre></div>
<p>But it’s real power comes with <code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code>: anything inside of
<code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code> will be evaluated and pasted into the string. This makes
it easy to interpolate variables:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"glue"</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">'We are learning how to use the {name} R package.'</span><span class="op">)</span></span>
<span><span class="co">#&gt; We are learning how to use the glue R package.</span></span></code></pre></div>
<p>And more complex functions:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">release_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-06-13"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">'The first version of the glue package was released on a {format(release_date, "%A")}.'</span><span class="op">)</span></span>
<span><span class="co">#&gt; The first version of the glue package was released on a Tuesday.</span></span></code></pre></div>
<p>All valid R code works in expressions, including braces and escaping.
Backslashes do need to be doubled just like in all R strings.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">`foo}\``</span> <span class="op">&lt;-</span> <span class="st">"foo"</span></span>
<span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{</span></span>
<span><span class="st">      {</span></span>
<span><span class="st">        '}\\'' # { and } in comments, single quotes</span></span>
<span><span class="st">        \"}\\\"\" # or double quotes are ignored</span></span>
<span><span class="st">        `foo}\\`` # as are { in backticks</span></span>
<span><span class="st">      }</span></span>
<span><span class="st">  }"</span><span class="op">)</span></span>
<span><span class="co">#&gt; foo</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="long-lines">Long lines<a class="anchor" aria-label="anchor" href="#long-lines"></a>
</h2>
<p>Glue comes with a number of features that make it easier to use when
work with large quantities of text. Leading whitespace and blank lines
from the first and last lines are automatically trimmed with
<code><a href="../reference/glue.html">glue()</a></code>, letting you indent the strings naturally in
code:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">    A formatted string</span></span>
<span><span class="st">    Can have multiple lines</span></span>
<span><span class="st">      with additional indention preserved</span></span>
<span><span class="st">    "</span><span class="op">)</span>  </span>
<span><span class="op">}</span></span>
<span><span class="fu">my_fun</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; A formatted string</span></span>
<span><span class="co">#&gt; Can have multiple lines</span></span>
<span><span class="co">#&gt;   with additional indention preserved</span></span></code></pre></div>
<p>An add extra newlines can be used if you want a leading or trailing
newline:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st"></span></span>
<span><span class="st">  leading or trailing newlines can be added explicitly</span></span>
<span><span class="st"></span></span>
<span><span class="st">  "</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; leading or trailing newlines can be added explicitly</span></span></code></pre></div>
<p>You can use <code>\\</code> at the end of a line continues to
continue a single line:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">    A formatted string \\</span></span>
<span><span class="st">    can also be on a \\</span></span>
<span><span class="st">    single line</span></span>
<span><span class="st">    "</span><span class="op">)</span></span>
<span><span class="co">#&gt; A formatted string can also be on a single line</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sql">SQL<a class="anchor" aria-label="anchor" href="#sql"></a>
</h2>
<p>glue_sql()` makes constructing SQL statements safe and easy Use
backticks to quote identifiers, normal strings and numbers are quoted
appropriately for your backend.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"[.]"</span>, <span class="st">"_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"iris"</span>, <span class="va">iris</span><span class="op">)</span></span>
<span><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">"sepal_width"</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="st">"iris"</span></span>
<span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">val</span> <span class="op">&lt;-</span> <span class="st">"setosa"</span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT {`var`}</span></span>
<span><span class="st">  FROM {`tbl`}</span></span>
<span><span class="st">  WHERE {`tbl`}.sepal_length &gt; {num}</span></span>
<span><span class="st">    AND {`tbl`}.species = {val}</span></span>
<span><span class="st">  "</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT `sepal_width`</span></span>
<span><span class="co">#&gt; FROM `iris`</span></span>
<span><span class="co">#&gt; WHERE `iris`.sepal_length &gt; 2</span></span>
<span><span class="co">#&gt;   AND `iris`.species = 'setosa'</span></span></code></pre></div>
<p><code><a href="../reference/glue_sql.html">glue_sql()</a></code> can be used in conjunction with parameterized
queries using <code><a href="https://dbi.r-dbi.org/reference/dbBind.html" class="external-link">DBI::dbBind()</a></code> to provide protection for SQL
Injection attacks</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sql</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT {`var`}</span></span>
<span><span class="st">  FROM {`tbl`}</span></span>
<span><span class="st">  WHERE {`tbl`}.sepal_length &gt; ?</span></span>
<span><span class="st">"</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbSendQuery.html" class="external-link">dbSendQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">sql</span><span class="op">)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbBind.html" class="external-link">dbBind</a></span><span class="op">(</span><span class="va">query</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbFetch.html" class="external-link">dbFetch</a></span><span class="op">(</span><span class="va">query</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;   sepal_width</span></span>
<span><span class="co">#&gt; 1         3.5</span></span>
<span><span class="co">#&gt; 2         3.0</span></span>
<span><span class="co">#&gt; 3         3.2</span></span>
<span><span class="co">#&gt; 4         3.1</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbClearResult.html" class="external-link">dbClearResult</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/glue_sql.html">glue_sql()</a></code> can be used to build up more complex queries
with interchangeable sub queries. It returns <code><a href="https://dbi.r-dbi.org/reference/SQL.html" class="external-link">DBI::SQL()</a></code>
objects which are properly protected from quoting.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sub_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT *</span></span>
<span><span class="st">  FROM {`tbl`}</span></span>
<span><span class="st">  "</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">  SELECT s.{`var`}</span></span>
<span><span class="st">  FROM ({sub_query}) AS s</span></span>
<span><span class="st">  "</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT s.`sepal_width`</span></span>
<span><span class="co">#&gt; FROM (SELECT *</span></span>
<span><span class="co">#&gt; FROM `iris`) AS s</span></span></code></pre></div>
<p>If you want to input multiple values for use in SQL IN statements put
<code>*</code> at the end of the value and the values will be collapsed
and quoted appropriately.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE sepal_length IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="fl">1</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE sepal_length IN (1)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE sepal_length IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE sepal_length IN (1, 2, 3, 4, 5)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE species IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="st">"setosa"</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE species IN ('setosa')</span></span>
<span></span>
<span><span class="fu"><a href="../reference/glue_sql.html">glue_sql</a></span><span class="op">(</span><span class="st">"SELECT * FROM {`tbl`} WHERE species IN ({vals*})"</span>,</span>
<span>  vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"setosa"</span>, <span class="st">"versicolor"</span><span class="op">)</span>, .con <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;SQL&gt; SELECT * FROM `iris` WHERE species IN ('setosa', 'versicolor')</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

  </div></footer>
</body>
</html>
